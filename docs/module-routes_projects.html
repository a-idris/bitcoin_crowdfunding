<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: routes/projects</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: routes/projects</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Projects router module.</div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="~blockchain"><span class="type-signature">(inner, constant) </span>blockchain<span class="type-signature"></span></h4>




<div class="description">
    Blockchain querying API
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line15">line 15</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~db"><span class="type-signature">(inner, constant) </span>db<span class="type-signature"> :<a href="Database.html">Database</a></span></h4>




<div class="description">
    Database wrapper object.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="Database.html">Database</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="DeleteProjectPage"><span class="type-signature">(route) </span>Delete Project Page<span class="type-signature"></span></h4>




<div class="description">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/projects/:id/delete</td>
                            </tr>
                            </table>
                            Delete the project page. First, authenticates the user as project creator through session user_id.
                            <h5>Route Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">:id</td>
            <td class="type">string</td>
            
            
            <td class="description last">the unique project id</td>
          </tr>
          </table>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line199">line 199</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="GetProjectCreationPage"><span class="type-signature">(route) </span>Get Project Creation Page<span class="type-signature"></span></h4>




<div class="description">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/projects/create</td>
                            </tr>
                            </table>
                            Display form to create a project.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line20">line 20</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="GetProjectPage"><span class="type-signature">(route) </span>Get Project Page<span class="type-signature"></span></h4>




<div class="description">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">GET</td>
                            <td class="name last">/projects/:id</td>
                            </tr>
                            </table>
                            Display the project page, including the project information, progress, updates and comments. Will also contain methods to make pledge from there.
                            <h5>Route Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">:id</td>
            <td class="type">string</td>
            
            
            <td class="description last">the unique project id</td>
          </tr>
          </table>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line154">line 154</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="Processcommentsubmission"><span class="type-signature">(route) </span>Process comment submission<span class="type-signature"></span></h4>




<div class="description">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">POST</td>
                            <td class="name last">/projects/:id/add_comment</td>
                            </tr>
                            </table>
                            Validate form, insert the comment into the database, refresh the page if successful.
                            <h5>Body Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">comment</td>
            <td class="type">string</td>
            
            
            <td class="description last">The comment text</td>
          </tr>
          </table>
                            <h5>Route Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">:id</td>
            <td class="type">string</td>
            
            
            <td class="description last">the unique project id</td>
          </tr>
          </table>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line256">line 256</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="Processpledge"><span class="type-signature">(route) </span>Process pledge<span class="type-signature"></span></h4>




<div class="description">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">POST</td>
                            <td class="name last">/projects/:id/make_pledge</td>
                            </tr>
                            </table>
                            Three stages for server side:
generate the inputs, transmit the transaction creating the exact amount output, process the partial 
transaction. Store the partial transaction in database. If the fund_goal is met with this pledge contribution,
craft the overall transaction and transmit it to the Bitcoin network. 

Validate form, process the pledge. Multiple client server interactions are needed, since the transaction
crafting is done on the client side while other parts need to be server side.
The initial stage is handled by generateInputs, where once a user wants to make a pledge 
the server side checks their wallet balance funds for sufficient funds to cover the desired amount. 
The assurance contract protocol necessitates that the partial transaction have as input an output with
the exact amount (since can't use change output address, because the outputs for all the partial pledge 
transactions to a project must remain constant). So once the client receives
                            <h5>Body Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">amount</td>
            <td class="type">string</td>
            
            
            <td class="description last">The comment text</td>
          </tr>
          </table>
                            <h5>Route Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">:id</td>
            <td class="type">string</td>
            
            
            <td class="description last">the unique project id</td>
          </tr>
          </table>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line340">line 340</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="Processprojectsubmission"><span class="type-signature">(route) </span>Process project submission<span class="type-signature"></span></h4>




<div class="description">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">POST</td>
                            <td class="name last">/projects/create</td>
                            </tr>
                            </table>
                            Validate, insert to PROJECTS, update hd_indices because of the newly generated address and update cookies.
                            <h5>Body Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">title</td>
            <td class="type">string</td>
            
            
            <td class="description last">Title of the project</td>
          </tr><tr>
            <td class="name">short_description</td>
            <td class="type">string</td>
            
            
            <td class="description last"></td>
          </tr><tr>
            <td class="name">description</td>
            <td class="type">string</td>
            
            
            <td class="description last"></td>
          </tr><tr>
            <td class="name">address</td>
            <td class="type">string</td>
            
            
            <td class="description last">The bitcoin address to which funds should be pledged</td>
          </tr><tr>
            <td class="name">fund_goal</td>
            <td class="type">string</td>
            
            
            <td class="description last">The fund goal amount, in bitcoin</td>
          </tr><tr>
            <td class="name">deadline</td>
            <td class="type">string</td>
            
            
            <td class="description last">The deadline by which this should be met. Date formatted string.</td>
          </tr>
          </table>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line35">line 35</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="Processupdatesubmission"><span class="type-signature">(route) </span>Process update submission<span class="type-signature"></span></h4>




<div class="description">
    <h5>Route:</h5>
                            <table class="params">
                            <thead><tr><th>Method</th><th class="last">Path</th></tr></thead>
                            <tr>
                            <td class="type">POST</td>
                            <td class="name last">/projects/:id/add_update</td>
                            </tr>
                            </table>
                            Validate form, assert that only author can add updates, insert the update into the database, 
refresh the page if successful.
                            <h5>Body Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">update</td>
            <td class="type">string</td>
            
            
            <td class="description last">The comment text</td>
          </tr>
          </table>
                            <h5>Route Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">:id</td>
            <td class="type">string</td>
            
            
            <td class="description last">the unique project id</td>
          </tr>
          </table>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line292">line 292</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~wallet"><span class="type-signature">(inner, constant) </span>wallet<span class="type-signature"></span></h4>




<div class="description">
    Wallet util functions
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line17">line 17</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~_validateTxInput"><span class="type-signature">(inner) </span>_validateTxInput<span class="signature">(input)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>input</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">the transaction Input object
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>prevTxId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">the id of the tx containing this output</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>outputIndex</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">the index of this output in tx referenced by prevTxId</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sequenceNumber</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>script</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">the script as a hex string</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>output</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>satoshis</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The value / amount in the output (in satoshis)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>script</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The locking script for the output in prevTx</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>scriptString</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">human readable form of the script</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line686">line 686</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~assertAuthor"><span class="type-signature">(inner) </span>assertAuthor<span class="signature">(project_id, candidate_user_id)</span><span class="type-signature"> &rarr; {Promise.&lt;(undefined|Error)>}</span></h4>
    

    



<div class="description">
    Checks if creator of the project with project_id is candidate_user_id
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>project_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The id of the project to be deleted</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>candidate_user_id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">The user_id to check if it is the author of the project</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line234">line 234</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise that resolves / rejects based on match / mismatch of the candid_user_id with the actual creator's user_d.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(undefined|Error)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~compilePartialTransaction"><span class="type-signature">(inner) </span>compilePartialTransaction<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;boolean>}</span></h4>
    

    



<div class="description">
    Check if the project has enough inputs to meet the fund_goal, and if so construct and transmit the funding transaction
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line595">line 595</a>
    </li></ul></dd>
    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        rethrows any errors encountered during db calls, transaction crafting, transmission
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    whether combined and sent successfully or not
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;boolean></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~generateInputs"><span class="type-signature">(inner) </span>generateInputs<span class="signature">(req, res)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Check balance of user and if everything is valid, using the res object, return a 
JSON encoded list of wallet UTXOs, whose sum amount is sufficient to cover the pledge amount. 
Otherwise send error. Responses are sent as JSON for the client side to handle.
                            <h5>Body Parameters:</h5>
          <table class="params">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                
                
                <th class="last">Description</th>
              </tr>
            </thead>
            <tr>
            <td class="name">amount</td>
            <td class="type">number</td>
            
            
            <td class="description last">The req.body.amount property used to check whether the wallet has sufficient funds</td>
          </tr>
          </table>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express request object</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express response object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line414">line 414</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~send_json_error"><span class="type-signature">(inner) </span>send_json_error<span class="signature">(req, res)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sends custom error object as JSON with status (defaults to 500) and message.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express request object</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express response object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line732">line 732</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~transmitExactAmount"><span class="type-signature">(inner) </span>transmitExactAmount<span class="signature">(req, res)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Transmit the transaction creating the exact amount, update hd_indices. If successful,
return the bitcoin address and fund goal of the project (for which the pledge is being made)
so the client can create the partial pledge transaction. Responses sent as JSON for the client side to handle.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express request object</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express response object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line461">line 461</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~transmitPartial"><span class="type-signature">(inner) </span>transmitPartial<span class="signature">(req, res)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express request object</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express response object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line500">line 500</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~update_hd_indices"><span class="type-signature">(inner) </span>update_hd_indices<span class="signature">(req, res, indices_to_set, transactionConnection)</span><span class="type-signature"> &rarr; {Promise.&lt;(undefined|Error)>}</span></h4>
    

    



<div class="description">
    Updates the hd wallet indices (external index or change index) in the database
based on the provided values in the indices_to_set object.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express request object</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>res</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">Express response object</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>indices_to_set</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>external_index</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The new external index</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>change_index</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The new change index</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>transactionConnection</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#Connection">Connection</a></span>


            
            </td>

            

            

            <td class="description last">To be passed when executing a transaction.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line753">line 753</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    promise that resolves to undefined if update is successful or rejects with any encountered Error
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(undefined|Error)></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~validate_create_project"><span class="type-signature">(inner) </span>validate_create_project<span class="signature">(submission)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Check that expected properties are there, are nonempty, fund_goal is valid positive number, deadline is valid formatted date.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>submission</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>title</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">Title of the project</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>short_description</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>description</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>address</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The bitcoin address to which funds should be pledged</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fund_goal</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The fund goal amount, in bitcoin</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>deadline</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The deadline by which this should be met. Date formatted string.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line122">line 122</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~validate_make_pledge"><span class="type-signature">(inner) </span>validate_make_pledge<span class="signature">(data, options)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Function to validate data from make_pledge route. Depends on stage.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>stage</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    'initial'
                
                </td>
            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line656">line 656</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="~validate_text"><span class="type-signature">(inner) </span>validate_text<span class="signature">(text)</span><span class="type-signature"> &rarr; {boolean}</span></h4>
    

    



<div class="description">
    Function to validate text string. Used for user input.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_projects.js.html">routes/projects.js</a>, <a href="routes_projects.js.html#line335">line 335</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">boolean</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-app.html">app</a></li><li><a href="module-client_js_create_project.html">client_js/create_project</a></li><li><a href="module-client_js_make_pledge.html">client_js/make_pledge</a></li><li><a href="module-client_js_register.html">client_js/register</a></li><li><a href="module-config.html">config</a></li><li><a href="module-routes_index.html">routes/index</a></li><li><a href="module-routes_login.html">routes/login</a></li><li><a href="module-routes_logout.html">routes/logout</a></li><li><a href="module-routes_projects.html">routes/projects</a></li><li><a href="module-routes_register.html">routes/register</a></li><li><a href="module-routes_users.html">routes/users</a></li><li><a href="module-src_api.html">src/api</a></li><li><a href="module-src_database.html">src/database</a></li><li><a href="module-src_key_management.html">src/key_management</a></li><li><a href="module-src_wallet.html">src/wallet</a></li></ul><h3>Classes</h3><ul><li><a href="Database.html">Database</a></li></ul><h3>Global</h3><ul><li><a href="global.html#parseCookie">parseCookie</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed May 02 2018 11:42:24 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>